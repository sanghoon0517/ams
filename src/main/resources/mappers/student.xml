<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ams.student.model.dao.StudentDao">
<!-- 	<insert id="insertStudent" parameterType="com.ams.teacher.model.dto.StudentDto"  useGeneratedKeys="true" keyProperty="st_idx"> -->
	<insert id="insertStudent" parameterType="com.ams.student.model.dto.StudentDto">
		INSERT INTO a_member(
			c_idx
			, st_nm
			, st_bth
			, st_gen
			, st_pn
			, st_schl
			, st_en_dt
			, st_dis_dt
			, st_prt_nm
			, st_prt_rlt
			, st_prt_pn
			, st_prt_em
			, st_adr
			, st_dtl
			, st_rm_c_cnt
		) VALUES(
			#{c_idx}
			, #{st_nm}
			, #{st_bth}
			, #{st_gen}
			, #{st_pn}
			, #{st_schl}
			, #{st_en_dt}
			, ''
			, #{st_prt_nm}
			, #{st_prt_rlt}
			, #{st_prt_pn}
			, #{st_prt_em}
			, #{st_adr}
			, #{st_dtl}
			, #{st_rm_c_cnt}
		)
	</insert>
	<select id="getStudentList" resultType="com.ams.student.model.dto.StudentDto">
		SELECT * FROM a_member
		ORDER BY st_idx DESC
	</select>
	<select id="getStudentListPaging" parameterType="com.ams.common.model.dto.PaginationCriteriaDto" resultType="com.ams.student.model.dto.StudentDto">
		SELECT * FROM a_member
		ORDER BY st_idx DESC
		LIMIT #{pageStart}, #{perPageNum}			
	</select>
	<select id="getStudentListCount" resultType="int">
		SELECT COUNT(*) FROM a_member
		ORDER BY st_idx DESC
	</select>
	<select id="getStdDate" resultType="String">
		SELECT DATE_SUB(MAKEDATE(year(now()),1), INTERVAL 12 YEAR) AS STANDARD_DATE
	</select>
</mapper>